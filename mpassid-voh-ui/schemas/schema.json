{
    "openapi": "3.0.1",
    "info": {
        "title": "MPASSid virkailijan opintopolun hallintapalvelu",
        "license": {
            "name": "EUPL Version 1.1",
            "url": "http://www.osor.eu/eupl/"
        },
        "version": "2.6"
    },
    "servers": [
        {
            "url": "https://virkailija.opintopolku.fi/mpassid"
        }
    ],
    "paths": {
        "/api/v2/provisioning": {
            "put": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Update provisioning status",
                "operationId": "updateProvisioningStatus",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Provisioning"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Provisioning"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get a blank integration",
                "operationId": "getBlankIntegration",
                "parameters": [
                    {
                        "name": "role",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "organization",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Integration creation successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration creation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Create an integration",
                "operationId": "createIntegration",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Integration"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Integration creation successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration creation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/{id}/discoveryinformation/logo": {
            "post": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Update discovery information logo",
                "operationId": "uploadLogo",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "required": [
                                    "file"
                                ],
                                "type": "object",
                                "properties": {
                                    "file": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Integration discovery information update successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration discovery information update error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/{id}": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get the specific integration",
                "operationId": "getIntegration",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Integration not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            },
            "put": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Update the specific integration",
                "operationId": "updateIntegration",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Integration"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Integration update successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Integration not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration update error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "409": {
                        "description": "Integration update conflict",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get a blank integration",
                "operationId": "getBlankIntegration",
                "parameters": [
                    {
                        "name": "role",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "organization",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "set",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Integration creation successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration creation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Create an integration",
                "operationId": "createIntegration",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/Integration"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "200": {
                        "description": "Integration creation successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration creation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/attribute/test/authorization": {
            "post": {
                "tags": [
                    "attribute-controller"
                ],
                "summary": "Test attributes authorization",
                "operationId": "testAttributesAuthorization",
                "requestBody": {
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/AttributeTestAuthorizationRequestBody"
                            }
                        }
                    },
                    "required": true
                },
                "responses": {
                    "403": {
                        "description": "Forbidden operation",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "type": "boolean"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {}
                        }
                    }
                }
            }
        },
        "/api/v2/ui/configuration/default": {
            "get": {
                "tags": [
                    "user-interface-configuration-controller"
                ],
                "summary": "Get user interface configuration",
                "operationId": "getDefaultUserInterfaceConfiguration",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/UserInterfaceConfiguration"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/ui/configuration/data": {
            "get": {
                "tags": [
                    "user-interface-configuration-controller"
                ],
                "summary": "Get user interface configuration",
                "operationId": "getDataUserInterfaceConfiguration",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/sp/{id}": {
            "get": {
                "tags": [
                    "service-provider-controller"
                ],
                "summary": "Get the specific Service Provider",
                "operationId": "getServiceProvider",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "404": {
                        "description": "ServiceProvider not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "Provides the specific service provider",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServiceProvider"
                                },
                                "examples": {
                                    "serviceprovider": {
                                        "description": "serviceprovider",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/sp/types": {
            "get": {
                "tags": [
                    "service-provider-controller"
                ],
                "summary": "Get a list of distinct ServiceProvider types",
                "operationId": "getServiceProviderTypes",
                "responses": {
                    "403": {
                        "description": "Forbidden operation",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                "examples": {
                                    "types": {
                                        "description": "types",
                                        "value": [
                                            "saml",
                                            "oidc"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/provisioning/serviceproviders": {
            "get": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Get all service providers",
                "operationId": "getServiceProviders",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/ServiceProviders"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "provisioning": []
                    }
                ]
            }
        },
        "/api/v2/provisioning/list": {
            "get": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Get all integrations",
                "operationId": "getIntegrations",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "provisioning": []
                    }
                ]
            }
        },
        "/api/v2/provisioning/integration/discoveryinformation/logo/{id}": {
            "get": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Get integration discovery information logo",
                "operationId": "getIntegrationDiscoveryInformationLogo",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Resource not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "provisioning": []
                    }
                ]
            }
        },
        "/api/v2/provisioning/identityproviders": {
            "get": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Get all identity providers",
                "operationId": "getIdentityProviders",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IdentityProviders"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "provisioning": []
                    }
                ]
            }
        },
        "/api/v2/provisioning/configuration/status": {
            "get": {
                "tags": [
                    "provisioning-controller"
                ],
                "summary": "Get provisioning configuration status",
                "operationId": "getProvisioningConfigurationStatus",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/ConfigurationStatus"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "provisioning": []
                    }
                ]
            }
        },
        "/api/v2/loading/status": {
            "get": {
                "tags": [
                    "loading-controller"
                ],
                "summary": "Get status of the most recently initiated integration loadings per type",
                "operationId": "getLoadingStatus",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string",
                                        "enum": [
                                            "STARTED",
                                            "LOADING",
                                            "SUCCEEDED",
                                            "FAILED"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "loading": []
                    }
                ]
            }
        },
        "/api/v2/integration/since/{timestamp}": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get integrations since a point in time",
                "operationId": "getIntegrationsSince",
                "parameters": [
                    {
                        "name": "timestamp",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date-time"
                        }
                    }
                ],
                "responses": {
                    "404": {
                        "description": "Integration not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integration",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/search": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Search paged integrations",
                "operationId": "getIntegrationsSpecSearchPageable",
                "parameters": [
                    {
                        "name": "search",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "type",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "role",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "deploymentPhase",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "referenceIntegration",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "status",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    {
                        "name": "pageable",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "$ref": "#/components/schemas/Pageable"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/PageIntegration"
                                },
                                "examples": {
                                    "searchIntegrations": {}
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "No integrations found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/list": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get all integrations",
                "operationId": "getIntegrations_1",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integrations": {
                                        "description": "integrations",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integrations.json"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/discoveryinformation": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get integration discovery information",
                "operationId": "getIntegrationDiscoveryInformation",
                "parameters": [
                    {
                        "name": "organizationOid",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "id",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "institutionType",
                        "in": "query",
                        "required": false,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "integer",
                                "format": "int32"
                            }
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/DiscoveryInformationDTO"
                                },
                                "examples": {
                                    "excluded": {
                                        "description": "existingExcluded: given organization's integrations (identifiers) of which discovery information contains excluded schools (filtered by given institution types), existingIncluded: institution codes of the given organization's integrations' discovery information (filtered by given institution types)",
                                        "value": {
                                            "existingIncluded": [],
                                            "existingExcluded": []
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Integration not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/discoveryinformation/logo/{id}": {
            "get": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Get integration discovery information logo",
                "operationId": "getIntegrationDiscoveryInformationLogo_1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/octet-stream": {
                                "schema": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Resource not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/idp/saml/metadata/{id}": {
            "post": {
                "tags": ["identity-provider-controller"],
                "summary": "Update SAML metadata",
                "operationId": "uploadSAMLMetadata",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "requestBody": {
                "content": {
                    "multipart/form-data": {
                    "schema": {
                        "required": ["file"],
                        "type": "object",
                        "properties": {
                        "file": { "type": "string", "format": "binary" }
                        }
                    }
                    }
                }
                },
                "responses": {
                    "200": {
                        "description": "SAML metadata update successful",
                        "content": {
                                "application/json": {
                                    "schema": {
                                        "$ref": "#/components/schemas/Integration"
                                    },
                                    "examples": {
                                        "integration": {
                                            "description": "integration",
                                            "externalValue": "https://mpassid-rr-test.csc.fi/integration-idp.json"
                                        }
                                    }
                                }
                        }
                    },
                    "405": {
                        "description": "SAML metadata update error",
                        "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/IntegrationError" }
                        }
                        }
                    },                    
                    "403": {
                        "description": "Forbidden",
                        "content": {
                        "application/json": {
                            "schema": { "$ref": "#/components/schemas/IntegrationError" }
                        }
                        }
                    }
                }
            }
        },
        "/api/v2/idp/types": {
            "get": {
                "tags": [
                    "identity-provider-controller"
                ],
                "summary": "Get a list of distinct IdentityProvider types",
                "operationId": "getIdentityProviderTypes",
                "responses": {
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                "examples": {
                                    "types": {
                                        "description": "types",
                                        "value": [
                                            "adfs",
                                            "wilma",
                                            "gsuite",
                                            "azure",
                                            "opinsys"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/attribute/test": {
            "get": {
                "tags": [
                    "attribute-controller"
                ],
                "summary": "Test attributes",
                "operationId": "testAttributes",
                "parameters": [
                    {
                        "name": "principal",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    },
                    {
                        "name": "select",
                        "in": "query",
                        "required": true,
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "string"
                            }
                        }
                    }
                ],
                "responses": {
                    "403": {
                        "description": "Forbidden operation",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "type": "object",
                                    "additionalProperties": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                "examples": {
                                    "items": {
                                        "description": "types",
                                        "value": []
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/attribute/names": {
            "get": {
                "tags": [
                    "attribute-controller"
                ],
                "summary": "Get a list of available attribute names",
                "operationId": "getAttributeNames",
                "responses": {
                    "403": {
                        "description": "Forbidden operation",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                },
                                "examples": {
                                    "names": {
                                        "description": "Attribute names",
                                        "value": [
                                            "foo",
                                            "bar",
                                            "zoo"
                                        ]
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/attribute/list": {
            "get": {
                "tags": [
                    "attribute-controller"
                ],
                "summary": "Get a list of configured attributes",
                "operationId": "getAttributes",
                "responses": {
                    "403": {
                        "description": "Forbidden operation",
                        "content": {
                            "*/*": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/components/schemas/Attribute"
                                    }
                                }
                            }
                        }
                    },
                    "200": {
                        "description": "OK",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v2/integration/{id}/inactive": {
            "delete": {
                "tags": [
                    "integration-controller"
                ],
                "summary": "Inactivate an integration",
                "operationId": "inactivateIntegration",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Integration inactivation successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/Integration"
                                },
                                "examples": {
                                    "integration": {
                                        "description": "integrations",
                                        "externalValue": "https://mpassid-rr-test.csc.fi/integrations.json"
                                    }
                                }
                            }
                        }
                    },
                    "405": {
                        "description": "Integration inactivation error",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "$ref": "#/components/schemas/IntegrationError"
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "schemas": {
            "Provisioning": {
                "type": "object",
                "properties": {
                    "deploymentPhase": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "lastTime": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "Adfs": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "entityId": {
                                "type": "string"
                            },
                            "metadataValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "signingCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "encryptionCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "metadataUrl": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "Attribute": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string",
                        "enum": [
                            "data",
                            "user"
                        ]
                    },
                    "name": {
                        "type": "string"
                    },
                    "content": {
                        "type": "string"
                    },
                    "configurationEntity": {
                        "$ref": "#/components/schemas/ConfigurationEntity"
                    }
                }
            },
            "Azure": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "entityId": {
                                "type": "string"
                            },
                            "metadataValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "signingCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "encryptionCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "metadataUrl": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "ConfigurationEntity": {
                "type": "object",
                "properties": {
                    "attributes": {
                        "uniqueItems": true,
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Attribute"
                        }
                    },
                    "idp": {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    "sp": {
                        "$ref": "#/components/schemas/ServiceProvider"
                    },
                    "set": {
                        "$ref": "#/components/schemas/IntegrationSet"
                    }
                }
            },
            "DiscoveryInformation": {
                "type": "object",
                "properties": {
                    "integration": {
                        "$ref": "#/components/schemas/Integration"
                    },
                    "customDisplayName": {
                        "type": "string",
                        "description": "Opetuksen- ja koulutuksenjrjestj (OKJ)"
                    },
                    "title": {
                        "type": "string",
                        "description": "Koulun nimen listieto"
                    },
                    "showSchools": {
                        "type": "boolean"
                    },
                    "schools": {
                        "uniqueItems": true,
                        "type": "array",
                        "description": "https://koski.opintopolku.fi/koski/dokumentaatio/koodisto/oppilaitosnumero/latest",
                        "items": {
                            "type": "string",
                            "description": "https://koski.opintopolku.fi/koski/dokumentaatio/koodisto/oppilaitosnumero/latest"
                        }
                    },
                    "excludedSchools": {
                        "uniqueItems": true,
                        "type": "array",
                        "description": "https://koski.opintopolku.fi/koski/dokumentaatio/koodisto/oppilaitosnumero/latest",
                        "items": {
                            "type": "string",
                            "description": "https://koski.opintopolku.fi/koski/dokumentaatio/koodisto/oppilaitosnumero/latest"
                        }
                    },
                    "earlyEducationProvider": {
                        "type": "boolean"
                    },
                    "customTitle": {
                        "type": "string",
                        "writeOnly": true
                    }
                }
            },
            "Gsuite": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "entityId": {
                                "type": "string"
                            },
                            "metadataValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "signingCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "encryptionCertificateValidUntil": {
                                "type": "string",
                                "format": "date"
                            },
                            "metadataUrl": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "IdentityProvider": {
                "type": "object",
                "properties": {
                    "institutionTypes": {
                        "uniqueItems": true,
                        "type": "array",
                        "items": {
                            "type": "integer",
                            "format": "int32"
                        }
                    },
                    "type": {
                        "type": "string"
                    },
                    "idpId": {
                        "type": "string"
                    },
                    "logoUrl": {
                        "type": "string"
                    },
                    "flowName": {
                        "type": "string"
                    }
                },
                "discriminator": {
                    "propertyName": "type",
                    "mapping": {
                        "adfs": "#/components/schemas/Adfs",
                        "azure": "#/components/schemas/Azure",
                        "gsuite": "#/components/schemas/Gsuite",
                        "opinsys": "#/components/schemas/Opinsys",
                        "wilma": "#/components/schemas/Wilma"
                    }
                }
            },
            "Integration": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "version": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "lastUpdatedOn": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "configurationEntity": {
                        "$ref": "#/components/schemas/ConfigurationEntity"
                    },
                    "organization": {
                        "$ref": "#/components/schemas/Organization"
                    },
                    "integrationSets": {
                        "uniqueItems": true,
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Integration"
                        }
                    },
                    "discoveryInformation": {
                        "$ref": "#/components/schemas/DiscoveryInformation"
                    },
                    "permissions": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/IntegrationPermission"
                        }
                    },
                    "deploymentPhase": {
                        "type": "integer",
                        "description": "0:testing, 1:production, 2:preproduction, 3:reserved",
                        "format": "int32"
                    },
                    "deploymentDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "acceptanceDate": {
                        "type": "string",
                        "format": "date"
                    },
                    "serviceContactAddress": {
                        "type": "string"
                    },
                    "active": {
                        "type": "boolean"
                    }
                }
            },
            "IntegrationPermission": {
                "type": "object",
                "properties": {
                    "from": {
                        "$ref": "#/components/schemas/Integration"
                    },
                    "to": {
                        "$ref": "#/components/schemas/Integration"
                    },
                    "lastUpdatedOn": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "IntegrationSet": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    }
                }
            },
            "OidcServiceProvider": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ServiceProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "clientId": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "Opinsys": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "tenantId": {
                                "type": "string"
                            }
                        }
                    }
                ]
            },
            "Organization": {
                "type": "object",
                "properties": {
                    "oid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "children": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/SubOrganization"
                        }
                    },
                    "ytunnus": {
                        "type": "string"
                    },
                    "nimi": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "object"
                        },
                        "writeOnly": true
                    }
                }
            },
            "SamlServiceProvider": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/ServiceProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "entityId": {
                                "type": "string",
                                "example": "https://example.org/6ab309b7-f4d4-455a-9c88-857474ceea64"
                            }
                        }
                    }
                ]
            },
            "ServiceProvider": {
                "type": "object",
                "properties": {
                    "type": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "metadata": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "object"
                        }
                    }
                },
                "discriminator": {
                    "propertyName": "type",
                    "mapping": {
                        "oidc": "#/components/schemas/OidcServiceProvider",
                        "saml": "#/components/schemas/SamlServiceProvider"
                    }
                }
            },
            "SubOrganization": {
                "type": "object",
                "properties": {
                    "oid": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "ytunnus": {
                        "type": "string"
                    },
                    "oppilaitostyyppi": {
                        "type": "string"
                    },
                    "oppilaitosKoodi": {
                        "type": "string"
                    },
                    "organisaatiotyypit": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "nimi": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "object"
                        },
                        "writeOnly": true
                    }
                }
            },
            "Wilma": {
                "type": "object",
                "allOf": [
                    {
                        "$ref": "#/components/schemas/IdentityProvider"
                    },
                    {
                        "type": "object",
                        "properties": {
                            "hostname": {
                                "type": "string",
                                "description": "Kirjautumisosoite"
                            }
                        }
                    }
                ]
            },
            "IntegrationError": {
                "type": "object",
                "properties": {
                    "status": {
                        "type": "string",
                        "enum": [
                            "100 CONTINUE",
                            "101 SWITCHING_PROTOCOLS",
                            "102 PROCESSING",
                            "103 EARLY_HINTS",
                            "103 CHECKPOINT",
                            "200 OK",
                            "201 CREATED",
                            "202 ACCEPTED",
                            "203 NON_AUTHORITATIVE_INFORMATION",
                            "204 NO_CONTENT",
                            "205 RESET_CONTENT",
                            "206 PARTIAL_CONTENT",
                            "207 MULTI_STATUS",
                            "208 ALREADY_REPORTED",
                            "226 IM_USED",
                            "300 MULTIPLE_CHOICES",
                            "301 MOVED_PERMANENTLY",
                            "302 FOUND",
                            "302 MOVED_TEMPORARILY",
                            "303 SEE_OTHER",
                            "304 NOT_MODIFIED",
                            "305 USE_PROXY",
                            "307 TEMPORARY_REDIRECT",
                            "308 PERMANENT_REDIRECT",
                            "400 BAD_REQUEST",
                            "401 UNAUTHORIZED",
                            "402 PAYMENT_REQUIRED",
                            "403 FORBIDDEN",
                            "404 NOT_FOUND",
                            "405 METHOD_NOT_ALLOWED",
                            "406 NOT_ACCEPTABLE",
                            "407 PROXY_AUTHENTICATION_REQUIRED",
                            "408 REQUEST_TIMEOUT",
                            "409 CONFLICT",
                            "410 GONE",
                            "411 LENGTH_REQUIRED",
                            "412 PRECONDITION_FAILED",
                            "413 PAYLOAD_TOO_LARGE",
                            "413 REQUEST_ENTITY_TOO_LARGE",
                            "414 URI_TOO_LONG",
                            "414 REQUEST_URI_TOO_LONG",
                            "415 UNSUPPORTED_MEDIA_TYPE",
                            "416 REQUESTED_RANGE_NOT_SATISFIABLE",
                            "417 EXPECTATION_FAILED",
                            "418 I_AM_A_TEAPOT",
                            "419 INSUFFICIENT_SPACE_ON_RESOURCE",
                            "420 METHOD_FAILURE",
                            "421 DESTINATION_LOCKED",
                            "422 UNPROCESSABLE_ENTITY",
                            "423 LOCKED",
                            "424 FAILED_DEPENDENCY",
                            "425 TOO_EARLY",
                            "426 UPGRADE_REQUIRED",
                            "428 PRECONDITION_REQUIRED",
                            "429 TOO_MANY_REQUESTS",
                            "431 REQUEST_HEADER_FIELDS_TOO_LARGE",
                            "451 UNAVAILABLE_FOR_LEGAL_REASONS",
                            "500 INTERNAL_SERVER_ERROR",
                            "501 NOT_IMPLEMENTED",
                            "502 BAD_GATEWAY",
                            "503 SERVICE_UNAVAILABLE",
                            "504 GATEWAY_TIMEOUT",
                            "505 HTTP_VERSION_NOT_SUPPORTED",
                            "506 VARIANT_ALSO_NEGOTIATES",
                            "507 INSUFFICIENT_STORAGE",
                            "508 LOOP_DETECTED",
                            "509 BANDWIDTH_LIMIT_EXCEEDED",
                            "510 NOT_EXTENDED",
                            "511 NETWORK_AUTHENTICATION_REQUIRED"
                        ]
                    },
                    "timestamp": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "message": {
                        "type": "string"
                    }
                }
            },
            "Loading": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "status": {
                        "type": "string",
                        "enum": [
                            "STARTED",
                            "LOADING",
                            "SUCCEEDED",
                            "FAILED"
                        ]
                    },
                    "type": {
                        "type": "string",
                        "enum": [
                            "ALL",
                            "IDP",
                            "SP",
                            "SET"
                        ]
                    },
                    "time": {
                        "type": "string",
                        "format": "date-time"
                    },
                    "errors": {
                        "type": "object",
                        "additionalProperties": {
                            "type": "string"
                        }
                    }
                }
            },
            "AttributeTestAuthorizationRequestBody": {
                "type": "object",
                "properties": {
                    "id": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "tenantId": { "type": "string" },
                    "clientId": {
                        "type": "string"
                    },
                    "clientSecret": {
                        "type": "string"
                    }
                }
            },
            "UserInterfaceConfiguration": {
                "type": "object",
                "properties": {
                    "oid": {
                        "type": "string"
                    },
                    "type": {
                        "type": "string"
                    },
                    "name": {
                        "type": "string"
                    },
                    "mandatory": {
                        "type": "boolean"
                    },
                    "deploymentPhase": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "validation": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "integrationType": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "object"
                            }
                        }
                    }
                }
            },
            "ServiceProviders": {
                "type": "object",
                "properties": {
                    "serviceProviders": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Integration"
                        }
                    }
                }
            },
            "IdentityProviders": {
                "type": "object",
                "properties": {
                    "identityProviders": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Integration"
                        }
                    }
                }
            },
            "ConfigurationStatus": {
                "type": "object",
                "properties": {
                    "updated": {
                        "type": "boolean"
                    },
                    "lastUpdateTime": {
                        "type": "string",
                        "description": "The update time of the oldest, updated integration (permissions) since the last provisioning time",
                        "format": "date-time"
                    },
                    "deploymentPhase": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "provisioningLastUpdateTime": {
                        "type": "string",
                        "format": "date-time"
                    }
                }
            },
            "Pageable": {
                "type": "object",
                "properties": {
                    "page": {
                        "minimum": 0,
                        "type": "integer",
                        "format": "int32"
                    },
                    "size": {
                        "minimum": 1,
                        "type": "integer",
                        "format": "int32"
                    },
                    "sort": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            },
            "PageIntegration": {
                "type": "object",
                "properties": {
                    "totalElements": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "totalPages": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "size": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "content": {
                        "type": "array",
                        "items": {
                            "$ref": "#/components/schemas/Integration"
                        }
                    },
                    "number": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "sort": {
                        "$ref": "#/components/schemas/SortObject"
                    },
                    "pageable": {
                        "$ref": "#/components/schemas/PageableObject"
                    },
                    "numberOfElements": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "first": {
                        "type": "boolean"
                    },
                    "last": {
                        "type": "boolean"
                    },
                    "empty": {
                        "type": "boolean"
                    }
                }
            },
            "PageableObject": {
                "type": "object",
                "properties": {
                    "offset": {
                        "type": "integer",
                        "format": "int64"
                    },
                    "sort": {
                        "$ref": "#/components/schemas/SortObject"
                    },
                    "pageNumber": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "pageSize": {
                        "type": "integer",
                        "format": "int32"
                    },
                    "paged": {
                        "type": "boolean"
                    },
                    "unpaged": {
                        "type": "boolean"
                    }
                }
            },
            "SortObject": {
                "type": "object",
                "properties": {
                    "empty": {
                        "type": "boolean"
                    },
                    "unsorted": {
                        "type": "boolean"
                    },
                    "sorted": {
                        "type": "boolean"
                    }
                }
            },
            "DiscoveryInformationDTO": {
                "type": "object",
                "properties": {
                    "existingExcluded": {
                        "uniqueItems": true,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    },
                    "existingIncluded": {
                        "uniqueItems": true,
                        "type": "array",
                        "items": {
                            "type": "string"
                        }
                    }
                }
            }
        },
        "securitySchemes": {
            "provisioning": {
                "type": "http",
                "in": "header",
                "scheme": "basic"
            },
            "loading": {
                "type": "http",
                "in": "header",
                "scheme": "basic"
            }
        }
    }
}
